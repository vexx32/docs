<!DOCTYPE html><html lang="en"><head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Chocolatey is software management automation for Windows that wraps installers, executables, zips, and scripts into compiled packages. Chocolatey integrates w/SCCM, Puppet, Chef, etc. Chocolatey is trusted by businesses to manage software deployments.">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@chocolateynuget">
        <meta name="twitter:title" content="Chocolatey Software | Automate Package Internalizer (MSP/C4B)">
        <meta name="twitter:image" content="https://docs.chocolatey.org/assets/images/global-shared/twitter-share.png">
        <meta property="og:title" content="Chocolatey Software | Automate Package Internalizer (MSP/C4B)">
        <meta property="og:description" content="Chocolatey is software management automation for Windows that wraps installers, executables, zips, and scripts into compiled packages. Chocolatey integrates w/SCCM, Puppet, Chef, etc. Chocolatey is trusted by businesses to manage software deployments.">
        <meta property="og:site_name" content="Chocolatey">
        <meta property="og:type" content="product">
        <meta property="og:image" content="https://docs.chocolatey.org/assets/images/global-shared/facebook-share.png">
        <meta property="og:url" content="https://docs.chocolatey.org/en-us/guides/organizations/automate-package-internalization">
        <meta property="product:brand" content="Chocolatey">
        <meta property="product:category" content="software">
        <meta name="flattr:id" content="mqgjkp">
        <meta property="DC.title" content="Chocolatey Software | Automate Package Internalizer (MSP/C4B)">
        <meta property="copyright" content="Chocolatey is Copyright 2020 - 2020 Chocolatey Software,Inc.">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
        <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
        <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
        <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
        <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
        <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
        <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
        <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">

        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,700" data-no-mirror="">
        <link rel="stylesheet" href="/assets/css/docsearch.min.css">
        <link rel="stylesheet" href="/assets/css/chocolatey.bundle.min.css">
        <script>
            if(!/MSIE \d|Trident.*rv:/.test(navigator.userAgent)) {
                const theme = localStorage.getItem('theme'), html = document.getElementsByTagName("html")[0];
                if(theme){if(theme == 'dark') {html.setAttribute("data-user-color-scheme", "dark");}else{html.setAttribute("data-user-color-scheme", "light");}}
            }
        </script>

        <title>Chocolatey Software | Automate Package Internalizer (MSP/C4B)</title>
        <script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-2743882-12"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'UA-2743882-12');
        </script>
    </head>
    <body class="chocolatey-docs">
                <div id="topNoticeAlert" class="alert alert-danger alert-dismissible alert-dismissible-center fade show d-none" role="alert">
                    <p class="mb-0"><a href="https://chocolatey.org/covid-19">Here's how we're responding to COVID-19 plus resources to help</a></p>
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
        <div id="globalNav">
            <div class="container-fluid">
                <ul class="nav global-nav">
    <li class="nav-item"><a class="nav-link" href="https://chocolatey.org" target="_blank" rel="noreferrer"><span class="d-sm-none">Back to </span>chocolatey.org</a></li>
    <li class="nav-item"><a class="nav-link" href="https://chocolatey.org/community" target="_blank" rel="noreferrer"><span class="d-sm-none">Back to the </span>Community</a></li>
    <li class="nav-item"><a class="nav-link" href="https://chocolatey.org/install" target="_blank" rel="noreferrer">Install</a></li>
</ul>
            </div>
        </div>
        <nav id="topNav" class="navbar navbar-expand">
            <a class="navbar-brand" href="/">
                <img class="d-md-none" src="/assets/images/global-shared/logo.svg" alt="Chocolatey">
                <img class="d-none d-md-block" src="/assets/images/global-shared/logo-square.svg" alt="Chocolatey">
            </a>
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/chocolatey/docs" aria-label="Edit on GitHub"><i class="fab fa-2x fa-github" aria-hidden="true"></i></a>
                </li>
                <li class="nav-item">
                    <label class="mb-0" for="themeToggle">
                    <input id="themeToggle" class="toggle-checkbox" type="checkbox" aria-label="Toggle theme settings">
                        <div class="toggle-slot">
                            <div class="sun-icon-wrapper">
                                <div class="sun-icon fas fa-sun"></div>
                            </div>
                            <div class="toggle-button"></div>
                            <div class="moon-icon-wrapper">
                                <div class="moon-icon fas fa-moon"></div>
                            </div>
                        </div>
                    </label>
                </li>
                 <li class="nav-item d-md-none">
                    <button type="button" aria-label="Search documentation" class="btn btn-search">
                        <i class="fas fa-search" aria-hidden="true"></i>
                    </button>
                </li>
            </ul>
            <form id="searchBox" class="form-inline d-none d-md-flex" role="search">
                <i class="fas fa-search" aria-hidden="true"></i>
                <input type="search" class="form-control" id="searchQuery" placeholder="Search..." aria-label="Search">
                <span class="d-none d-md-flex search-key-container">
                    <span class="badge badge-key badge-primary search-key"></span>
                    <span class="badge badge-key badge-primary">k</span>
                </span>
            </form>
            <button type="button" aria-label="Close search" class="btn btn-search-close btn-link d-none">Close</button>
            <button type="button" class="navbar-toggler btn d-md-none" data-toggle="collapse" data-target="#leftSidebar" aria-expanded="false" aria-controls="leftSidebar" aria-label="Toggle navigation"><i class="fas fa-bars"></i></button>
        </nav>
        <div class="container-fluid">
            <div class="row">
                <div id="leftSidebarNav" class="col-md-3 col-xl-2 p-0">
                    <div class="loader-container"><div class="loader"></div></div>
                    <nav class="navbar navbar-expand-md p-0">
                        <div id="leftSidebar" class="collapse navbar-collapse">
                            <ul class="nav global-nav">
    <li class="nav-item"><a class="nav-link" href="https://chocolatey.org" target="_blank" rel="noreferrer"><span class="d-sm-none">Back to </span>chocolatey.org</a></li>
    <li class="nav-item"><a class="nav-link" href="https://chocolatey.org/community" target="_blank" rel="noreferrer"><span class="d-sm-none">Back to the </span>Community</a></li>
    <li class="nav-item"><a class="nav-link" href="https://chocolatey.org/install" target="_blank" rel="noreferrer">Install</a></li>
</ul>
                            <ul class="navbar-nav">
                                <li class="nav-item">
                                        <a class="nav-link pl-c2" href="/en-us">Chocolatey - Software Management for Windows</a>
                                </li>
                                        <li class="nav-item">
                                            <a class="nav-link pl-c2" href="/en-us/why">Why Chocolatey?</a>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-8b95a6da-cd0d-4be3-8b68-7702313c1ba0" aria-label="collapse or expand navigation" href="#id-8b95a6da-cd0d-4be3-8b68-7702313c1ba0"></button>
                                                <a href="/en-us/features">Features</a>
                                            </div>
                                            <div class="collapse" id="id-8b95a6da-cd0d-4be3-8b68-7702313c1ba0">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/made-for-automation">Made for Automation</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/powershell">Packaging for the masses - PowerShell</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/package-anything">Package anything</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/create-packages">Create your own packages</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/host-packages">Host packages internally</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/integrations">Integrates with everything</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/extensions">Extend Chocolatey With PowerShell Modules (extensions)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/shim">Executable shimming (like symlinks but better)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/self-service-anywhere">Self Service Anywhere (C4B) - Support modern workforce</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/chocolatey-central-management">Chocolatey Central Management (C4B) - Endpoint Management</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/package-internalizer">Package Internalizer (C4B)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/package-builder">Package Builder (C4B)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/package-audit">Package Audit (C4B)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/package-reducer">Package Reducer (Pro+)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/branding">Branding Chocolatey Applications (C4B)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/virus-check">Runtime Malware Protection (Pro+)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/private-cdn">CDN Download Cache (Pro+)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/install-directory-override">Ubiquitous Install Directory Option (Pro+)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/features/package-throttle">Package Throttle (Pro+)</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-457b456f-e2de-4228-8bf0-a7fd9d36b0a9" aria-label="collapse or expand navigation" href="#id-457b456f-e2de-4228-8bf0-a7fd9d36b0a9"></button>
                                                                    <a href="/en-us/features/package-synchronization">Package Synchronization</a>
                                                                </div>
                                                                <div class="collapse" id="id-457b456f-e2de-4228-8bf0-a7fd9d36b0a9">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/features/package-synchronization/automatic-sync">Automatic Sync (Pro+)</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/features/package-synchronization/sync-command">Choco Sync Command (C4B)</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/features/package-synchronization/packages-to-programs">Packages to Programs (C4B)</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link pl-c2" href="/en-us/faqs">FAQs</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link pl-c2" href="/en-us/troubleshooting">Troubleshooting</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link pl-c2" href="/en-us/configuration">Configuration</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link pl-c2" href="/en-us/getting-started">Getting Started</a>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-37f7dbd6-a6b0-473d-a282-6395c9a16b39" aria-label="collapse or expand navigation" href="#id-37f7dbd6-a6b0-473d-a282-6395c9a16b39"></button>
                                                <a href="/en-us/choco">Chocolatey CLI (choco)</a>
                                            </div>
                                            <div class="collapse" id="id-37f7dbd6-a6b0-473d-a282-6395c9a16b39">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/choco/release-notes">Release Notes</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/choco/setup">Setup / Install</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/choco/uninstallation">How to uninstall</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-97d2dee8-f8d9-4a80-8566-7451ce974fc8" aria-label="collapse or expand navigation" href="#id-97d2dee8-f8d9-4a80-8566-7451ce974fc8"></button>
                                                                    <a href="/en-us/choco/commands">Commands</a>
                                                                </div>
                                                                <div class="collapse" id="id-97d2dee8-f8d9-4a80-8566-7451ce974fc8">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/config">Config</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/download">Download</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/feature">Feature</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/info">Info</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/install">Install</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/list">List/Search</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/optimize">Optimize</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/outdated">Outdated</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/pin">Pin</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/search">Search</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/setapikey">ApiKey</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/source">Source</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/sources">Source/Sources</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/support">Support</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/sync">Sync</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/synchronize">Synchronize</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/uninstall">Uninstall</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/unpackself">UnpackSelf</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/update">Update</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/upgrade">Upgrade</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/choco/commands/version">Version</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-95aee8a8-8c8b-433d-837c-37d5d1c4bd69" aria-label="collapse or expand navigation" href="#id-95aee8a8-8c8b-433d-837c-37d5d1c4bd69"></button>
                                                <a href="/en-us/chocolatey-gui">Chocolatey GUI</a>
                                            </div>
                                            <div class="collapse" id="id-95aee8a8-8c8b-433d-837c-37d5d1c4bd69">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/chocolatey-gui/release-notes">Release Notes</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/chocolatey-gui/setup">Setup</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/chocolatey-gui/known-issues">Known Issues</a>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-966db173-55ec-4487-8370-5da3d5b6b0bf" aria-label="collapse or expand navigation" href="#id-966db173-55ec-4487-8370-5da3d5b6b0bf"></button>
                                                <a href="/en-us/community-repository">Chocolatey Community Repository (CCR)</a>
                                            </div>
                                            <div class="collapse" id="id-966db173-55ec-4487-8370-5da3d5b6b0bf">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/community-repository/community-packages-disclaimer">Chocolatey.org Packages Disclaimer</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-1338cd08-d8fb-48e5-8ce3-177fb3a26b70" aria-label="collapse or expand navigation" href="#id-1338cd08-d8fb-48e5-8ce3-177fb3a26b70"></button>
                                                                    <a href="/en-us/community-repository/users">Users</a>
                                                                </div>
                                                                <div class="collapse" id="id-1338cd08-d8fb-48e5-8ce3-177fb3a26b70">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/community-repository/users/package-triage-process">Request Package Fixes/Updates</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-cae8bb27-98da-4806-8322-0e628476f9b3" aria-label="collapse or expand navigation" href="#id-cae8bb27-98da-4806-8322-0e628476f9b3"></button>
                                                                    <a href="/en-us/community-repository/maintainers">Maintainers</a>
                                                                </div>
                                                                <div class="collapse" id="id-cae8bb27-98da-4806-8322-0e628476f9b3">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/community-repository/maintainers/moderation">Chocolatey.org Moderation</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/community-repository/maintainers/package-maintainer-handover">Take Over Package Maintenance Exclusively</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/community-repository/maintainers/deprecate-a-chocolatey-package">Deprecate a Package</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-0b36ef99-7d92-43f4-906a-35a755b646ce" aria-label="collapse or expand navigation" href="#id-0b36ef99-7d92-43f4-906a-35a755b646ce"></button>
                                                <a href="/en-us/licensed-extension">Chocolatey Licensed Extension</a>
                                            </div>
                                            <div class="collapse" id="id-0b36ef99-7d92-43f4-906a-35a755b646ce">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/licensed-extension/release-notes">Release Notes</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/licensed-extension/setup">Setup / How to install licensed edition</a>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-0245aae6-a47c-4e06-bcf3-f2251eb584ba" aria-label="collapse or expand navigation" href="#id-0245aae6-a47c-4e06-bcf3-f2251eb584ba"></button>
                                                <a href="/en-us/agent">Chocolatey Agent</a>
                                            </div>
                                            <div class="collapse" id="id-0245aae6-a47c-4e06-bcf3-f2251eb584ba">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/agent/release-notes">Release Notes</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/agent/setup">Setup</a>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-c15205c6-789d-4927-a855-e772cd41aca4" aria-label="collapse or expand navigation" href="#id-c15205c6-789d-4927-a855-e772cd41aca4"></button>
                                                <a href="/en-us/central-management">Chocolatey Central Management (CCM)</a>
                                            </div>
                                            <div class="collapse" id="id-c15205c6-789d-4927-a855-e772cd41aca4">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/central-management/release-notes">Release Notes</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-2bb270ba-f631-43ac-af3e-34c5e6da9044" aria-label="collapse or expand navigation" href="#id-2bb270ba-f631-43ac-af3e-34c5e6da9044"></button>
                                                                    <a href="/en-us/central-management/setup">Setup</a>
                                                                </div>
                                                                <div class="collapse" id="id-2bb270ba-f631-43ac-af3e-34c5e6da9044">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/setup/database">Database</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/setup/service">Service</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/setup/website">Website</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/setup/client">Client</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/setup/upgrade">Upgrade</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-eb6224f0-955a-4102-bbc5-8df62003e726" aria-label="collapse or expand navigation" href="#id-eb6224f0-955a-4102-bbc5-8df62003e726"></button>
                                                                    <a href="/en-us/central-management/usage">Usage</a>
                                                                </div>
                                                                <div class="collapse" id="id-eb6224f0-955a-4102-bbc5-8df62003e726">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/usage/computers">Computers</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/usage/software">Software</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/usage/groups">Groups</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/usage/deployments">Deployments</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/usage/reports">Reports</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/usage/api">API</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-b7fe2928-fd4b-4d74-b535-6a8843401e5e" aria-label="collapse or expand navigation" href="#id-b7fe2928-fd4b-4d74-b535-6a8843401e5e"></button>
                                                                    <a href="/en-us/central-management/chococcm">ChocoCCM</a>
                                                                </div>
                                                                <div class="collapse" id="id-b7fe2928-fd4b-4d74-b535-6a8843401e5e">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/chococcm/release-notes">Release Notes</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/central-management/chococcm/setup">Setup</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                                        <button class="btn btn-collapse collapsed pl-c275" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-04ea34a2-c276-48b2-9310-764a178fe15b" aria-label="collapse or expand navigation" href="#id-04ea34a2-c276-48b2-9310-764a178fe15b"></button>
                                                                                        <a href="/en-us/central-management/chococcm/functions">Functions</a>
                                                                                    </div>
                                                                                    <div class="collapse" id="id-04ea34a2-c276-48b2-9310-764a178fe15b">
                                                                                        <ul class="navbar-nav">
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/addccmgroup">Add-CCMGroup</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/addccmgroupmember">Add-CCMGroupMember</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/connectccmserver">Connect-CCMServer</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/disableccmdeployment">Disable-CCMDeployment</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/exportccmdeployment">Export-CCMDeployment</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/exportccmdeploymentreport">Export-CCMDeploymentReport</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/exportccmoutdatedsoftwarereport">Export-CCMOutdatedSoftwareReport</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmcomputer">Get-CCMComputer</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmdeployment">Get-CCMDeployment</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmgroup">Get-CCMGroup</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmgroupmember">Get-CCMGroupMember</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmoutdatedsoftware">Get-CCMOutdatedSoftware</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmoutdatedsoftwaremember">Get-CCMOutdatedSoftwareMember</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmoutdatedsoftwarereport">Get-CCMOutdatedSoftwareReport</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmoutdatedsoftwarereportdetail">Get-CCMOutdatedSoftwareReportDetail</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmrole">Get-CCMRole</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getccmsoftware">Get-CCMSoftware</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/getdeploymentresult">Get-DeploymentResult</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/importpdqdeploypackage">Import-PDQDeployPackage</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/moveccmdeploymenttoready">Move-CCMDeploymentToReady</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/newccmdeployment">New-CCMDeployment</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/newccmdeploymentstep">New-CCMDeploymentStep</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/newccmoutdatedsoftwarereport">New-CCMOutdatedSoftwareReport</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/removeccmdeployment">Remove-CCMDeployment</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/removeccmdeploymentstep">Remove-CCMDeploymentStep</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/removeccmgroup">Remove-CCMGroup</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/removeccmgroupmember">Remove-CCMGroupMember</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/removeccmstaledeployment">Remove-CCMStaleDeployment</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/setccmdeploymentstep">Set-CCMDeploymentStep</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/setccmgroup">Set-CCMGroup</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/setccmnotificationstatus">Set-CCMNotificationStatus</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/startccmdeployment">Start-CCMDeployment</a>
                                                                                                </li>
                                                                                                <li class="nav-item">
                                                                                                    <a class="nav-link pl-c5" href="/en-us/central-management/chococcm/functions/stopccmdeployment">Stop-CCMDeployment</a>
                                                                                                </li>
                                                                                        </ul>
                                                                                    </div>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-036f0016-7dc8-43ff-a603-a08cefe3dbdb" aria-label="collapse or expand navigation" href="#id-036f0016-7dc8-43ff-a603-a08cefe3dbdb"></button>
                                                <a href="/en-us/quick-deployment">Quick Deployment Environment (QDE)</a>
                                            </div>
                                            <div class="collapse" id="id-036f0016-7dc8-43ff-a603-a08cefe3dbdb">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/quick-deployment/release-notes">Release Notes</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-b37e9235-2be9-43f3-a38c-07159f8b9cf3" aria-label="collapse or expand navigation" href="#id-b37e9235-2be9-43f3-a38c-07159f8b9cf3"></button>
                                                                    <a href="/en-us/quick-deployment/setup">Setup</a>
                                                                </div>
                                                                <div class="collapse" id="id-b37e9235-2be9-43f3-a38c-07159f8b9cf3">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/setup/desktop-readme">Desktop Readme</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/setup/ssl-setup">SSL Setup</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/setup/firewall-changes">Firewall Changes</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/setup/client-setup">Client Setup</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/setup/internet-setup">Internet Setup</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/setup/upgrade-license">Upgrade License</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-ec451f56-29ed-48d8-90b0-745f5ebcea6e" aria-label="collapse or expand navigation" href="#id-ec451f56-29ed-48d8-90b0-745f5ebcea6e"></button>
                                                                    <a href="/en-us/quick-deployment/v1">QDE v1</a>
                                                                </div>
                                                                <div class="collapse" id="id-ec451f56-29ed-48d8-90b0-745f5ebcea6e">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/v1/setup">Setup</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/v1/desktop-readme">Desktop Readme</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/v1/ssl-setup">SSL Setup</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/v1/firewall-changes">Firewall Changes</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/quick-deployment/v1/client-setup">Client Setup</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-3297b34b-afce-4b93-a37b-513e2111c17b" aria-label="collapse or expand navigation" href="#id-3297b34b-afce-4b93-a37b-513e2111c17b"></button>
                                                <a href="/en-us/create">Package Creation</a>
                                            </div>
                                            <div class="collapse" id="id-3297b34b-afce-4b93-a37b-513e2111c17b">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/create/create-packages">Create Packages</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/create/create-packages-quick-start">Quick Start</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-bda6fdcc-9cd1-411a-9957-db76ecf6f394" aria-label="collapse or expand navigation" href="#id-bda6fdcc-9cd1-411a-9957-db76ecf6f394"></button>
                                                                    <a href="/en-us/create/commands">Commands</a>
                                                                </div>
                                                                <div class="collapse" id="id-bda6fdcc-9cd1-411a-9957-db76ecf6f394">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/commands/new">New</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/commands/pack">Pack</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/commands/api-key">ApiKey</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/commands/push">Push</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-4f371847-6738-4e3c-80ec-381fc420a68c" aria-label="collapse or expand navigation" href="#id-4f371847-6738-4e3c-80ec-381fc420a68c"></button>
                                                                    <a href="/en-us/create/functions">PowerShell Reference</a>
                                                                </div>
                                                                <div class="collapse" id="id-4f371847-6738-4e3c-80ec-381fc420a68c">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/format-filesize">Format-FileSize</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-checksumvalid">Get-ChecksumValid</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-chocolateybins">Get-ChocolateyBins</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-chocolateyunzip">Get-ChocolateyUnzip</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-chocolateywebfile">Get-ChocolateyWebFile</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-environmentvariable">Get-EnvironmentVariable</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-environmentvariablenames">Get-EnvironmentVariableNames</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-ftpfile">Get-FtpFile</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-osarchitecturewidth">Get-OSArchitectureWidth</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-packageparameters">Get-PackageParameters</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-processorbits">Get-ProcessorBits</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-toolslocation">Get-ToolsLocation</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-uacenabled">Get-UACEnabled</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-uninstallregistrykey">Get-UninstallRegistryKey</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-viruscheckvalid">Get-VirusCheckValid</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-webfile">Get-WebFile</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-webfilename">Get-WebFileName</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/get-webheaders">Get-WebHeaders</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-binfile">Install-BinFile</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateydesktoplink">Install-ChocolateyDesktopLink</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateyenvironmentvariable">Install-ChocolateyEnvironmentVariable</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateyexplorermenuitem">Install-ChocolateyExplorerMenuItem</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateyfileassociation">Install-ChocolateyFileAssociation</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateyinstallpackage">Install-ChocolateyInstallPackage</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateypackage">Install-ChocolateyPackage</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateypath">Install-ChocolateyPath</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateypinnedtaskbaritem">Install-ChocolateyPinnedTaskBarItem</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateypowershellcommand">Install-ChocolateyPowerShellCommand</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateyshortcut">Install-ChocolateyShortcut</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateyvsixpackage">Install-ChocolateyVsixPackage</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateywindowsservice">Install-ChocolateyWindowsService</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-chocolateyzippackage">Install-ChocolateyZipPackage</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/install-vsix">Install-Vsix</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/set-environmentvariable">Set-EnvironmentVariable</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/set-powershellexitcode">Set-PowerShellExitCode</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/start-chocolateyprocessasadmin">Start-ChocolateyProcessAsAdmin</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/start-chocolateywindowsservice">Start-ChocolateyWindowsService</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/stop-chocolateywindowsservice">Stop-ChocolateyWindowsService</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/test-processadminrights">Test-ProcessAdminRights</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/uninstall-binfile">Uninstall-BinFile</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/uninstall-chocolateyenvironmentvariable">Uninstall-ChocolateyEnvironmentVariable</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/uninstall-chocolateypackage">Uninstall-ChocolateyPackage</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/uninstall-chocolateywindowsservice">Uninstall-ChocolateyWindowsService</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/uninstall-chocolateyzippackage">Uninstall-ChocolateyZipPackage</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/update-sessionenvironment">Update-SessionEnvironment</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/write-chocolateyfailure">Write-ChocolateyFailure</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/write-chocolateysuccess">Write-ChocolateySuccess</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/write-fileupdatelog">Write-FileUpdateLog</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/create/functions/write-functioncalllogmessage">Write-FunctionCallLogMessage</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/create/automatic-packages">Automatic Packaging</a>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start active">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-4cca9521-6f9c-4cb1-b323-20d86a87da96" aria-label="collapse or expand navigation" href="#id-4cca9521-6f9c-4cb1-b323-20d86a87da96"></button>
                                                <a href="/en-us/guides">Guides</a>
                                            </div>
                                            <div class="collapse" id="id-4cca9521-6f9c-4cb1-b323-20d86a87da96">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-079fae31-d92a-4c21-8722-d7256ac0edb7" aria-label="collapse or expand navigation" href="#id-079fae31-d92a-4c21-8722-d7256ac0edb7"></button>
                                                                    <a href="/en-us/guides/usage">Using Chocolatey</a>
                                                                </div>
                                                                <div class="collapse" id="id-079fae31-d92a-4c21-8722-d7256ac0edb7">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/usage/proxy-settings-for-chocolatey">Use Chocolatey w/Proxy Server</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/usage/change-cache">Change Download Cache Location aka Don't use TEMP for downloads</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/usage/install-upgrade-package-without-scripts">Install/Upgrade a Package w/out running install scripts</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/usage/development-environment-setup">Set up a Development Environment</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-49e64002-99e2-4801-a013-2ee7407cabe0" aria-label="collapse or expand navigation" href="#id-49e64002-99e2-4801-a013-2ee7407cabe0"></button>
                                                                    <a href="/en-us/guides/create">Package Creation</a>
                                                                </div>
                                                                <div class="collapse" id="id-49e64002-99e2-4801-a013-2ee7407cabe0">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/create/recompile-packages">Manually Recompile Packages, Embedding/Internalizing Remote Resources</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/create/parse-packageparameters-argument">Parse Package Parameters</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/create/mount-an-iso-in-chocolatey-package">Mount Iso</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/create/create-custom-package-templates">Create Custom Package Templates</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start active">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-76638cb8-fcb9-4fd3-9d87-a98e75ccb4aa" aria-label="collapse or expand navigation" href="#id-76638cb8-fcb9-4fd3-9d87-a98e75ccb4aa"></button>
                                                                    <a href="/en-us/guides/organizations">Organizations</a>
                                                                </div>
                                                                <div class="collapse" id="id-76638cb8-fcb9-4fd3-9d87-a98e75ccb4aa">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/organizations/organizational-deployment-guide">Set up Chocolatey for Internal/organizational use</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4 active active-page" href="/en-us/guides/organizations/automate-package-internalization">Automate Package Internalizer (MSP/C4B)</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/organizations/chocolatey-for-business-quick-start-guide">C4B Quick Start Guide</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/guides/organizations/set-up-chocolatey-server">Set up the Chocolatey.Server</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                                        <li class="nav-item">
                                            <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                <button class="btn btn-collapse collapsed" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-b6eacf09-b5bd-46dd-9ee5-d38b4e4e017e" aria-label="collapse or expand navigation" href="#id-b6eacf09-b5bd-46dd-9ee5-d38b4e4e017e"></button>
                                                <a href="/en-us/information">Information</a>
                                            </div>
                                            <div class="collapse" id="id-b6eacf09-b5bd-46dd-9ee5-d38b4e4e017e">
                                                <ul class="navbar-nav">
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-41eec35a-2ea3-4bcf-b8f6-d6188b3005b6" aria-label="collapse or expand navigation" href="#id-41eec35a-2ea3-4bcf-b8f6-d6188b3005b6"></button>
                                                                    <a href="/en-us/information/release-notes">Release Notes</a>
                                                                </div>
                                                                <div class="collapse" id="id-41eec35a-2ea3-4bcf-b8f6-d6188b3005b6">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/information/release-notes/floss">Free Libre Open Source Software (FLOSS)</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/information/release-notes/licensed">Licensed</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/information/security">Security</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/information/legal">Legal</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <a class="nav-link pl-5" href="/en-us/information/history">History</a>
                                                            </li>
                                                            <li class="nav-item">
                                                                <div class="nav-link nav-link-collapse d-flex align-items-start">
                                                                    <button class="btn btn-collapse collapsed pl-c175" type="button" data-toggle="collapse" aria-expanded="false" aria-controls="id-2acdaf27-8c62-43c6-b78b-f39d0af03bf8" aria-label="collapse or expand navigation" href="#id-2acdaf27-8c62-43c6-b78b-f39d0af03bf8"></button>
                                                                    <a href="/en-us/information/learning-resources">More Learning Resources</a>
                                                                </div>
                                                                <div class="collapse" id="id-2acdaf27-8c62-43c6-b78b-f39d0af03bf8">
                                                                    <ul class="navbar-nav">
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/information/learning-resources/resources">Resources</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/information/learning-resources/videos">Videos</a>
                                                                                </li>
                                                                                <li class="nav-item">
                                                                                    <a class="nav-link pl-c4" href="/en-us/information/learning-resources/presentations">Presentations</a>
                                                                                </li>
                                                                    </ul>
                                                                </div>
                                                            </li>
                                                </ul>
                                            </div>
                                        </li>
                            </ul>
                        </div>
                    </nav>
                </div>
                <div class="col-md-9 col-xl-10 py-3 py-md-5 mx-auto">
                    <div class="ml-md-4 d-xl-none">
                        <h1 class="title">Automate Package Internalizer (MSP/C4B)</h1>                 
<nav aria-label="breadcrumb">
	<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="/en-us">Chocolatey</a></li>
			<li class="breadcrumb-item"><a href="/en-us/guides">Guides</a></li>
			<li class="breadcrumb-item"><a href="/en-us/guides/organizations">Organizations</a></li>
		
		<li class="breadcrumb-item active" aria-current="page">Automate Package Internalizer (MSP/C4B)</li>
	</ol>
</nav>

                    </div>
                    <div class="row">
                        <div id="mainContent" class="col-xl-10 pl-md-5 order-2 order-xl-1">
                             <div class="d-none d-xl-block">
                                <h1 class="title">Automate Package Internalizer (MSP/C4B)</h1>                 
<nav aria-label="breadcrumb">
	<ol class="breadcrumb">
			<li class="breadcrumb-item"><a href="/en-us">Chocolatey</a></li>
			<li class="breadcrumb-item"><a href="/en-us/guides">Guides</a></li>
			<li class="breadcrumb-item"><a href="/en-us/guides/organizations">Organizations</a></li>
		
		<li class="breadcrumb-item active" aria-current="page">Automate Package Internalizer (MSP/C4B)</li>
	</ol>
</nav>

                             </div>
                             <h2 id="summary">Summary</h2>
<p>When running within an organization it is beneficial to use your own, internally controlled, package repository. But that doesn't mean you have to create all packages from scratch. Chocolatey allows you to create packages easily using the <a href="/en-us/features/package-builder">package builder</a> but it also allows you to take packages from the Chocolatey Community Repository and recompile them for internal use - this is a process known as <a href="../create/recompile-packages">package internalization</a>. This guide shows you how to use that within your organization.</p>
<h2 id="organizational-requirements">Organizational Requirements</h2>
<p>When distributing software across your organization you need confidence and control of your package source. We do not recommend an organization use the <a href="https://chocolatey.org" title="Chocolatey Community Repository">Chocolatey Community Repository</a> for the following reasons:</p>
<ul>
<li>Trust.
When using packages within your organization you need to be sure that you can trust the creators and maintainers of those packages. While every package going through the Chocolatey Community Repository undergoes a <a href="https://github.com/chocolatey/choco/wiki/Moderation">moderation process</a>, the creators and maintainers are strangers to your organization.</li>
<li>Stability.
You need a stable and reliable connection to wherever your packages are stored and it needs to be always available during your business hours.</li>
<li>Control.
To ensure the packages work in your environment you need to be in control of the testing, approval and release process.</li>
</ul>
<p>For these reasons, we do not recommend that organizations use the Chocolatey Community Repository as a package source and encourage replacing it with your own internal package source.</p>
<h3 id="architecture">Architecture</h3>
<p>Chocolatey recommends you use an architecture that meets the <a href="#organizational-requirements">organizational requirements</a> as we have shown below.</p>
<p><img src="/assets/images/internalizer/architecture-diagram.png" alt="Chocolatey Architecture Diagram"></p>
<p>Let's break down the diagram:</p>
<ol>
<li>Package Internalizer - The package internalizer downloads approved packages from the Chocolatey Community Repository and software binaries from their source locations.</li>
<li>Source Control - once packages have been internalized we recommend they are stored in source control.</li>
<li>Test 'Internal Package Repository' - once internalized by the Package Internalizer, packages are pushed to here for further processing such as being put through automated testing.</li>
<li>Production 'Internal Package Repository' - after the package has been processing in the Test 'Internal Package Repository' it will be pushed to your production package source for release to your organization.</li>
</ol>
<p>While it's not explicitly specified the glue that holds all of this together is automation using a self-hosted CI / CD tool such as <a href="https://chocolatey.org/packages/jenkins">Jenkins</a>, <a href="https://chocolatey.org/packages/gocdserver">GoCD</a>, <a href="https://chocolatey.org/packages/teamcity">TeamCity</a> etc. While it may be possible to do this with externally hosted solutions using local build agents (such as <a href="https://visualstudio.microsoft.com/team-services/">VSTS</a>) your mileage may vary.</p>
<p><strong>NOTE:</strong> The Chocolatey Architecture Diagram shows the services separated. But don't mistake the services for servers. All of these services, package internalizer, source control and package repositories can all be run on one server. There is a caveat however. <a href="./set-up-chocolatey-server">Chocolatey Server</a> can only run one package source per server, so if you use this with a test and production repository source, as we recommend, you will need to run each on separate servers. This limitation does not apply to <a href="https://www.sonatype.com/nexus-repository-sonatype">Sonatype Nexus</a>, <a href="https://jfrog.com/artifactory/">Artifactory</a>, <a href="https://inedo.com/proget">ProGet</a> and others.</p>
<h2 id="building-your-internal-infrastructure">Building Your Internal Infrastructure</h2>
<p>Lets build the internal infrastructure to support this process.</p>
<h3 id="server-pre-requisites">Server Pre-Requisites</h3>
<p>When creating each server follow these steps:</p>
<ol>
<li>Create a server with <a href="https://www.microsoft.com/en-us/evalcenter/evaluate-system-center">Windows Server 2016</a> - this can be a virtual or physical server. Details on how to create a server are beyond the scope of this guide - <strong>don't forget to rename your server to the correct name</strong>;</li>
<li><a href="https://chocolatey.org/install#installing-chocolatey">Install Chocolatey</a>;</li>
<li>Install <code>baretail</code>, <code>notepadplusplus.install</code> and <code>7zip</code> with Chocolatey: <code>choco install baretail notepadplusplus.install 7zip -y</code>;</li>
</ol>
<h3 id="internal-package-repositories">Internal Package Repositories</h3>
<p>For this guide we have chosen to use <a href="./set-up-chocolatey-server">Chocolatey Server</a> to host our internal package repository. However as we noted earlier this has the limitation of hosting only one repository per server. For anything more than a simple environment, we recommend you use <a href="https://www.sonatype.com/nexus-repository-sonatype">Sonatype Nexus</a>, <a href="https://jfrog.com/download-artifactory-pro/">Artifactory Pro</a> or <a href="https://inedo.com/proget">ProGet</a>.</p>
<p>The repositories to setup are for <em>test</em> and <em>production</em> which we will call <code>testrepo-srv</code> and <code>prodrepo-srv</code>. There are full <a href="./set-up-chocolatey-server#setup-normally">instructions for setting up Chocolatey server</a> but to make sure we end up with the same result we list specific instructions here. Follow these instructions for each server, <code>testrepo-srv</code> and <code>prodrepo-srv</code>:</p>
<h4 id="install-and-configure-chocolatey-server">Install and Configure Chocolatey Server</h4>
<p>Before starting, make sure you install Chocolatey Server on separate servers.</p>
<ol>
<li><a href="#server-pre-requisites">Create a server and ensure you have the pre-requisites</a> before continuing.</li>
<li>To install and configure Chocolatey Server, run the following PowerShell code (see the comments in the code for more information) in an <strong>elevated Administrator session</strong>:</li>
</ol>
<pre><code class="language-powershell">  $siteName = 'ChocolateyServer'
  $appPoolName = 'ChocolateyServerAppPool'
  $sitePath = 'c:\tools\chocolatey.server'

  function Add-Acl {
      [CmdletBinding()]
      Param (
          [string]$Path,
          [System.Security.AccessControl.FileSystemAccessRule]$AceObject
      )

      Write-Verbose "Retrieving existing ACL from $Path"
      $objACL = Get-ACL -Path $Path
      $objACL.AddAccessRule($AceObject)
      Write-Verbose "Setting ACL on $Path"
      Set-ACL -Path $Path -AclObject $objACL
  }

  function New-AclObject {
      [CmdletBinding()]
      Param (
          [string]$SamAccountName,
          [System.Security.AccessControl.FileSystemRights]$Permission,
          [System.Security.AccessControl.AccessControlType]$AccessControl = 'Allow',
          [System.Security.AccessControl.InheritanceFlags]$Inheritance = 'None',
          [System.Security.AccessControl.PropagationFlags]$Propagation = 'None'
      )

      New-Object -TypeName System.Security.AccessControl.FileSystemAccessRule($SamAccountName, $Permission, $Inheritance, $Propagation, $AccessControl)
  }

  if ($null -eq (Get-Command -Name 'choco.exe' -ErrorAction SilentlyContinue)) {
      Write-Warning "Chocolatey not installed. Cannot install standard packages."
      Exit 1
  }
  # Install Chocolatey.Server prereqs
  choco install IIS-WebServer --source windowsfeatures
  choco install IIS-ASPNET45 --source windowsfeatures

  # Install Chocolatey.Server
  choco upgrade chocolatey.server -y

  # Step by step instructions here https://docs.chocolatey.org/en-us/guides/organizations/set-up-chocolatey-server#setup-normally
  # Import the right modules
  Import-Module WebAdministration
  # Disable or remove the Default website
  Get-Website -Name 'Default Web Site' | Stop-Website
  Set-ItemProperty "IIS:\Sites\Default Web Site" serverAutoStart False    # disables website

  # Set up an app pool for Chocolatey.Server. Ensure 32-bit is enabled and the managed runtime version is v4.0 (or some version of 4). Ensure it is "Integrated" and not "Classic".
  New-WebAppPool -Name $appPoolName -Force
  Set-ItemProperty IIS:\AppPools\$appPoolName enable32BitAppOnWin64 True       # Ensure 32-bit is enabled
  Set-ItemProperty IIS:\AppPools\$appPoolName managedRuntimeVersion v4.0       # managed runtime version is v4.0
  Set-ItemProperty IIS:\AppPools\$appPoolName managedPipelineMode Integrated   # Ensure it is "Integrated" and not "Classic"
  Restart-WebAppPool -Name $appPoolName   # likely not needed ... but just in case

  # Set up an IIS website pointed to the install location and set it to use the app pool.
  New-Website -Name $siteName -ApplicationPool $appPoolName -PhysicalPath $sitePath

  # Add permissions to c:\tools\chocolatey.server:
  'IIS_IUSRS', 'IUSR', "IIS APPPOOL\$appPoolName" | ForEach-Object {
      $obj = New-AclObject -SamAccountName $_ -Permission 'ReadAndExecute' -Inheritance 'ContainerInherit','ObjectInherit'
      Add-Acl -Path $sitePath -AceObject $obj
  }

  # Add the permissions to the App_Data subfolder:
  $appdataPath = Join-Path -Path $sitePath -ChildPath 'App_Data'
  'IIS_IUSRS', "IIS APPPOOL\$appPoolName" | ForEach-Object {
      $obj = New-AclObject -SamAccountName $_ -Permission 'Modify' -Inheritance 'ContainerInherit', 'ObjectInherit'
      Add-Acl -Path $appdataPath -AceObject $obj
  }
</code></pre>
<p><code>4.</code> We shouldn't need to reboot the server but let's do it so we know everything is ready to go;
<code>5.</code> From the server, open the browser and visit <code>https://localhost</code> - you will see some instructions but you need to note the password near the bottom. As this is a test environment we don't need to change this however <strong>for a production environment follow the instructions to change the password</strong>;
<code>6.</code> Finally test the Chocolatey Server is working. From the server use the command <code>choco list --source http://localhost/chocolatey</code>;</p>
<p>Once this is done for both servers, you will have two repositories:</p>
<ol>
<li>Test Repository:</li>
</ol>
<ul>
<li>Name: <code>testrepo-srv</code></li>
<li>push URL: <code>https://testrepo-srv/chocolatey</code></li>
</ul>
<p><code>2.</code> Production Repository:</p>
<ul>
<li>Name: <code>prodrepo-srv</code></li>
<li>Push URL: <code>https://prodrepo-srv/chocolatey</code></li>
</ul>
<h3 id="install-and-configure-jenkins-server">Install and Configure Jenkins Server</h3>
<p><a href="https://jenkins.io/">Jenkins</a> is a Continuous Integration / Continuous Delivery (often called CI/CD) tool that does the automation required to automatically manage the packages between the test and production repositories.</p>
<p>To install and configure Jenkins:</p>
<ol>
<li><a href="#server-pre-requisites">Create a server and ensure you have the pre-requisites</a> before continuing.</li>
<li>Install Jenkins using Chocolatey: <code>choco install jenkins -y</code></li>
<li>Once Jenkins is installed it will open a web browser and take you to the configuration web page (if it does not open for any reason, open the web browser and browse to <code>http://localhost:8080</code></li>
</ol>
<ul>
<li>The first page will refresh once Jenkins is installed. If it does not click <code>ENABLE AUTO REFRESH</code> in the top left hand corner;</li>
<li>Unlock Jenkins by following the instructions on the page (you need to open the file it specifies, with Notepad), finding the password and pasting it into the box and click <strong>Continue</strong>;</li>
<li>For this guide, click <strong>Install Suggested Plugins</strong> and wait for them to install;</li>
<li>On the <em>Create First Admin</em> page, click <strong>Continue as admin</strong>;</li>
<li>On the <em>Instance Configuration</em> page, click <strong>Save and Finish</strong>;</li>
<li>On the <em>Jenkins is ready!</em> page, click <strong>Start using Jenkins</strong>;</li>
</ul>
<ol>
<li>As the code we will be running in the Jenkins jobs is PowerShell, we need to add the PowerShell plugin.</li>
</ol>
<ul>
<li>On the home page, click <strong>Manage Jenkins</strong></li>
<li>Click <strong>Manage Plugins</strong>;
<img src="/assets/images/internalizer/jenkins-ps-plugin.png" alt="Jenkins PowerShell Plugin"></li>
<li>Click the <strong>Available</strong> tab;</li>
<li>In the <em>Filter</em> box type <code>PowerShell</code>;</li>
<li>Tick the <em>PowerShell</em> plugin and click <strong>Install without Restart</strong>;</li>
<li>Click <strong>Go back to the top page</strong>;</li>
</ul>
<ol>
<li>Copy your Chocolatey Business license to <code>ProgramData\chocolatey\license</code> in the root of the system drive;</li>
<li>Run the command <code>choco install chocolatey.extension -y</code>;</li>
</ol>
<p>Jenkins requires several PowerShell scripts to automate the processes. Create a directory on the root of your System Drive (normally <code>C:\</code>) called <code>scripts</code> and create each script file there.</p>
<h4 id="script-get-updatedpackage.ps1">Script: <code>Get-UpdatedPackage.ps1</code></h4>
<pre><code class="language-powershell">[CmdletBinding()]
  Param (
      [Parameter(Mandatory)]
      [string]
      $LocalRepo,

      [Parameter(Mandatory)]
      [string]
      $LocalRepoApiKey,

      [Parameter(Mandatory)]
      [string]
      $RemoteRepo

  )

  . .\ConvertTo-ChocoObject.ps1

  Write-Verbose "Getting list of local packages from '$LocalRepo'."
  $localPkgs = choco list --source $LocalRepo --limit-output | ConvertTo-ChocoObject
  Write-Verbose "Retrieved list of $(($localPkgs).count) packages from '$Localrepo'."

  $localPkgs | ForEach-Object {
      Write-Verbose "Getting remote package information for '$($_.name)'."
      $remotePkg = choco list $_.name --source $RemoteRepo --exact --limit-output | ConvertTo-ChocoObject
      if ([version]($remotePkg.version) -gt ([version]$_.version)) {
          Write-Verbose "Package '$($_.name)' has a remote version of '$($remotePkg.version)' which is later than the local version '$($_.version)'."
          Write-Verbose "Internalizing package '$($_.name)' with version '$($remotePkg.version)'."
          $tempPath = Join-Path -Path $env:TEMP -ChildPath ([GUID]::NewGuid()).GUID
          choco download $_.name --no-progress --internalize --force --internalize-all-urls --append-use-original-location --output-directory=$tempPath --source=$RemoteRepo

          if ($LASTEXITCODE -eq 0) {
              Write-Verbose "Pushing package '$($_.name)' to local repository '$LocalRepo'."
              (Get-Item -Path (Join-Path -Path $tempPath -ChildPath "*.nupkg")).fullname | ForEach-Object {
                  choco push $_ --source $LocalRepo --api-key $LocalRepoApiKey --force
                  if ($LASTEXITCODE -eq 0) {
                      Write-Verbose "Package '$_' pushed to '$LocalRepo'."
                  }
                  else {
                      Write-Verbose "Package '$_' could not be pushed to '$LocalRepo'.`nThis could be because it already exists in the repository at a higher version and can be mostly ignored. Check error logs."
                  }
              }
          }
          else {
              Write-Verbose "Failed to download package '$($_.name)'"
          }
      }
      else {
          Write-Verbose "Package '$($_.name)' has a remote version of '$($remotePkg.version)' which is not later than the local version '$($_.version)'."
      }
}
</code></pre>
<h4 id="script-update-prodrepofromtest.ps1">Script: <code>Update-ProdRepoFromTest.ps1</code></h4>
<pre><code class="language-powershell">  [CmdletBinding()]

  Param (
      [Parameter(Mandatory)]
      [string]
      $ProdRepo,

      [Parameter(Mandatory)]
      [string]
      $ProdRepoApiKey,

      [Parameter(Mandatory)]
      [string]
      $TestRepo
  )

  . .\ConvertTo-ChocoObject.ps1

  # get all of the packages from the test repo
  $testPkgs = choco list --source $TestRepo --limit-output | ConvertTo-ChocoObject
  $prodPkgs = choco list --source $ProdRepo --limit-output | ConvertTo-ChocoObject
  $tempPath = Join-Path -Path $env:TEMP -ChildPath ([GUID]::NewGuid()).GUID

  if ($null -eq $testPkgs) {
      Write-Verbose "Test repository appears to be empty. Nothing to push to production."
  }
  elseif ($null -eq $prodPkgs) {
      $pkgs = $testPkgs
  }
  else {
      $pkgs = Compare-Object -ReferenceObject $testpkgs -DifferenceObject $prodpkgs -Property name, version | Where-object SideIndicator -eq '&lt;='
  }

  $pkgs | ForEach-Object {
      Write-Verbose "Downloading package '$($_.name)' to '$tempPath'."
      choco download $_.name --no-progress --output-directory=$tempPath --source=$TestRepo --force --ignore-dependencies
      if ($LASTEXITCODE -eq 0) {
          $pkgPath = (Get-Item -Path (Join-Path -Path $tempPath -ChildPath '*.nupkg')).FullName

          # #######################
          # INSERT CODE HERE TO TEST YOUR PACKAGE
          # #######################

          # If package testing is successful ...
          if ($LASTEXITCODE -eq 0) {
              Write-Verbose "Pushing downloaded package '$(Split-Path -Path $pkgPath -Leaf)' to production repository '$ProdRepo'."
              choco push $pkgPath --source=$ProdRepo --api-key=$ProdRepoApiKey --force
              if ($LASTEXITCODE -eq 0) {
                  Write-Verbose "Pushed package successfully."
              }
              else {
                  Write-Verbose "Could not push package."
              }
          }
          else {
              Write-Verbose "Package testing failed."
          }
          Remove-Item -Path $pkgPath -Force
      }
      else {
          Write-Verbose "Could not download package."
      }
  }
</code></pre>
<p>Note the section above where you should insert the code to test your packages before being pushed to the production repository. This testing should be on an image that is typical for your environment, often called a 'Gold Image'.</p>
<h4 id="script-convertto-chocoobject.ps1">Script: <code>ConvertTo-ChocoObject.ps1</code></h4>
<pre><code class="language-powershell">  function ConvertTo-ChocoObject {
      [CmdletBinding()]
      Param (
          [Parameter(ValueFromPipeline)]
          [string]$InputObject
      )

      Process {
          # format of the 'choco list --limit-output' output is:
          # &lt;PACKAGE NAME&gt; &lt;VERSION&gt; (ie. adobereader|2015.6.7)
          if (-not [string]::IsNullOrEmpty($InputObject)) {
              $props = $_.split('|')
              New-Object -TypeName psobject -Property @{ name = $props[0]; version = $props[1] }
          }
      }
  }
</code></pre>
<p>We're now ready to create the jobs to work with the repository.</p>
<h4 id="create-jenkins-jobs">Create Jenkins Jobs</h4>
<p>To allow us to automatically manage the test and production repository we will create three Jenkins jobs to:</p>
<ul>
<li>Automatically update any out-of-date packages in the test repository from the Community Repository;</li>
<li>Allow us to download a package from the Community Repository and submit it to our test repository;</li>
<li>To automatically determine which packages are new or updated on the test repository, test them and submit them to the production repository;</li>
</ul>
<p>Each job is detailed below. Use these details to create a new job:</p>
<ol>
<li>From the Jenkins home page, click <strong>New Item</strong>;</li>
<li>Enter the item name, click <strong>Pipeline</strong> and click <strong>OK</strong>;</li>
<li>Complete the details page for each job and click <strong>OK</strong>;</li>
</ol>
<h5 id="jenkins-job-details-update-test-repository">Jenkins Job Details: Update Test Repository</h5>
<p>Below are the details for the Jenkins job to update the test repository from the Chocolatey Community Repository. This job will check the test repository against the Chocolatey Community Repository and download any updated packages, internalize them and submit them to the test repository. If successful it will then trigger the job named <strong>Update Production Repository</strong>.</p>
<ul>
<li><p><strong>General Tab</strong></p>
<ul>
<li><em>Item Name</em>: <strong>Update test repository from Chocolatey Community Repository</strong></li>
<li><em>Project Type</em>: <strong>Pipeline</strong></li>
<li><em>Description</em>: <strong>Automatically update any out of date packages in the test repository from the Community Repository.</strong></li>
<li><em>Ticked Options</em>: <strong>This project is parameterized</strong> and <strong>Do not allow concurrent builds</strong>;</li>
<li><em>Parameters</em>:
<ul>
<li><p><em>Parameter Type</em>: <strong>String parameter</strong></p>
</li>
<li><p><em>Name</em>: <strong>P_LOCAL_REPO_URL</strong></p>
</li>
<li><p><em>Default Value</em>: http://testrepo-srv/chocolatey</p>
</li>
<li><p><em>Description</em>: <strong>Internal test repository.</strong></p>
</li>
<li><p><em>Options</em>: Tick <strong>Trim the string</strong></p>
</li>
<li><p><em>Parameter Type</em>: <strong>String parameter</strong></p>
</li>
<li><p><em>Name</em>: <strong>P_REMOTE_REPO_URL</strong></p>
</li>
<li><p><em>Default Value</em>: <a href="https://chocolatey.org/api/v2/">https://chocolatey.org/api/v2/</a></p>
</li>
<li><p><em>Description</em>: <strong>Remote repository containing updated package versions.</strong></p>
</li>
<li><p><em>Options</em>: Tick <strong>Trim the string</strong></p>
</li>
<li><p><em>Parameter Type</em>: <strong>Password parameter</strong></p>
</li>
<li><p><em>Name</em>: <strong>P_LOCAL_REPO_API_KEY</strong></p>
</li>
<li><p><em>Default Value</em>: The test repository API Key - if you have not changed this it will be the default;</p>
</li>
<li><p><em>Description</em>: <strong>API key for the internal test repository where updated packages will be pushed.</strong></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Pipeline Tab</strong></p>
<ul>
<li><em>Definition</em>: <strong>Pipeline script</strong></li>
<li><em>Script</em>:</li>
</ul>
</li>
</ul>
<pre><code class="language-powershell">  node {
      powershell '''
          Set-Location (Join-Path -Path $env:SystemDrive -ChildPath 'scripts')
          .\\Get-UpdatedPackage.ps1 -LocalRepo $env:P_LOCAL_REPO_URL `
              -LocalRepoApiKey $env:P_LOCAL_REPO_API_KEY `
              -RemoteRepo $env:P_REMOTE_REPO_URL `
              -Verbose
      '''
  }
</code></pre>
<p>For this guide we will trigger each job manually, however in production you will want to add the <strong>Build Trigger</strong> option <strong>Build periodically</strong> and complete the <strong>Schedule</strong> field.</p>
<p>Click <strong>Save</strong> once complete and then click <strong>Back to Dashboard</strong>.</p>
<h5 id="jenkins-job-details-internalize-package">Jenkins Job Details: Internalize Package</h5>
<p>Below are the details for the Jenkins job to update the test repository from the Chocolatey Community Repository. This job will take a list of packages that you submit to the job, download and internalize those packages and push them to the test repository. Once this has been done it will trigger the job named <strong>Update Production Repository</strong> to test and push them to the production repository.</p>
<ul>
<li><p><strong>General Tab</strong></p>
<ul>
<li><em>Item Name</em>: <strong>Internalize packages from the Community Repository</strong></li>
<li><em>Project Type</em>: <strong>Pipeline</strong></li>
<li><em>Description</em>: <strong>Add new packages for internalizing from the Community Repository.</strong></li>
<li><em>Ticked Options</em>: <strong>This project is parameterized</strong> and <strong>Do not allow concurrent builds</strong>;</li>
<li><em>Parameters</em>:
<ul>
<li><p><em>Parameter Type</em>: <strong>String parameter</strong></p>
</li>
<li><p><em>Name</em>: <strong>P_PKG_LIST</strong></p>
</li>
<li><p><em>Default Value</em>: <strong>&lt;leave blank&gt;</strong></p>
</li>
<li><p><em>Description</em>: <strong>List of Chocolatey packages to be internalized (semicolon separated).</strong></p>
</li>
<li><p><em>Options</em>: Tick <strong>Trim the string</strong></p>
</li>
<li><p><em>Parameter Type</em>: <strong>String parameter</strong></p>
</li>
<li><p><em>Name</em>: <strong>P_DST_URL</strong></p>
</li>
<li><p><em>Default Value</em>: http://testrepo-srv/chocolatey</p>
</li>
<li><p><em>Description</em>: <strong>Internal package repository URL.</strong></p>
</li>
<li><p><em>Options</em>: Tick <strong>Trim the string</strong></p>
</li>
<li><p><em>Parameter Type</em>: <strong>Password parameter</strong></p>
</li>
<li><p><em>Name</em>: <strong>P_API_KEY</strong></p>
</li>
<li><p><em>Default Value</em>: The test repository API Key - if you have not changed this it will be the default;</p>
</li>
<li><p><em>Description</em>: <strong>API key for the internal test repository.</strong></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Pipeline Tab</strong></p>
<ul>
<li><em>Definition</em>: <strong>Pipeline script</strong></li>
<li><em>Script</em>:</li>
</ul>
</li>
</ul>
<pre><code class="language-powershell">  node {
      powershell '''
          $temp = Join-Path -Path $env:TEMP -ChildPath ([GUID]::NewGuid()).Guid
          $null = New-Item -Path $temp -ItemType Directory
          Write-Output "Created temporary directory '$temp'."
          ($env:P_PKG_LIST).split(';') | ForEach-Object {
              choco download $_ --no-progress --internalize --force --internalize-all-urls --append-use-original-location --output-directory=$temp --source='https://chocolatey.org/api/v2/'
              if ($LASTEXITCODE -eq 0) {
                  (Get-Item -Path (Join-Path -Path $temp -ChildPath "*.nupkg")).fullname | ForEach-Object {
                      choco push $_ --source "$($env:P_DST_URL)" --api-key "$($env:P_API_KEY)" --force
                      if ($LASTEXITCODE -eq 0) {
                          Write-Verbose "Package '$_' pushed to '$($env:P_DST_URL)'.";
                      }
                      else {
                          Write-Verbose "Package '$_' could not be pushed to '$($env:P_DST_URL)'.`nThis could be because it already exists in the repository at a higher version and can be mostly ignored. Check error logs."
                      }
                  }
              }
              else {
                  Write-Output "Failed to download package '$_'"
              }

              # Clean up, ready for next execution
              Remove-Item -Path (Join-Path -Path $temp -ChildPath "*.nupkg") -Force
          }

          Remove-Item -Path $temp -Force -Recurse
      '''
  }
</code></pre>
<p>Click <strong>Save</strong> once complete and then click <strong>Back to Dashboard</strong>.</p>
<h5 id="jenkins-job-details-update-production-repository">Jenkins Job Details: Update Production Repository</h5>
<p>Below are the details for the Jenkins job to update the production repository. This job will take any packages that are new or updated in the test repository, test them and, if successful, submit them to the production repository.</p>
<ul>
<li><p><strong>General Tab</strong></p>
<ul>
<li><em>Item Name</em>: <strong>Update production repository</strong></li>
<li><em>Project Type</em>: <strong>Pipeline</strong></li>
<li><em>Description</em>: <strong>Determine new packages on the Test repository, test and submit them to the Production repository.</strong></li>
<li><em>Ticked Options</em>: <strong>This project is parameterized</strong> and <strong>Do not allow concurrent builds</strong>;</li>
<li><em>Parameters</em>:
<ul>
<li><p><em>Parameter Type</em>: <strong>String parameter</strong></p>
</li>
<li><p><em>Name</em>: <strong>P_PROD_REPO_URL</strong></p>
</li>
<li><p><em>Default Value</em>: http://prodrepo-srv/chocolatey</p>
</li>
<li><p><em>Description</em>: <strong>URL to the production repository.</strong></p>
</li>
<li><p><em>Options</em>: Tick <strong>Trim the string</strong></p>
</li>
<li><p><em>Parameter Type</em>: <strong>Password parameter</strong></p>
</li>
<li><p><em>Name</em>: <strong>P_PROD_REPO_API_KEY</strong></p>
</li>
<li><p><em>Default Value</em>: The test repository API Key - if you have not changed this it will be the default;</p>
</li>
<li><p><em>Description</em>: <strong>API key for the production repository.</strong></p>
</li>
<li><p><em>Parameter Type</em>: <strong>String parameter</strong></p>
</li>
<li><p><em>Name</em>: <strong>P_TEST_REPO_URL</strong></p>
</li>
<li><p><em>Default Value</em>: http://testrepo-srv/chocolatey</p>
</li>
<li><p><em>Description</em>: <strong>URL for the test repository.</strong></p>
</li>
<li><p><em>Options</em>: Tick <strong>Trim the string</strong></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Build Triggers</strong></p>
<ul>
<li><em>Options</em>: <strong>Build after other projects are built</strong></li>
<li><em>Projects to watch</em>: <strong>Internalize packages from the Community Repository</strong> and <strong>Update test repository from Chocolatey Community Repository</strong></li>
<li><em>Project Options</em>: <strong>Trigger only if build is stable</strong></li>
</ul>
</li>
<li><p><strong>Pipeline Tab</strong></p>
<ul>
<li><em>Definition</em>: <strong>Pipeline script</strong></li>
<li><em>Script</em>:</li>
</ul>
</li>
</ul>
<pre><code class="language-powershell">  node {
      powershell '''
          Set-Location (Join-Path -Path $env:SystemDrive -ChildPath 'scripts')
          .\\Update-ProdRepoFromTest.ps1 `
              -ProdRepo $env:P_PROD_REPO_URL `
              -ProdRepoApiKey $env:P_PROD_REPO_API_KEY `
              -TestRepo $env:P_TEST_REPO_URL `
              -Verbose
      '''
  }
</code></pre>
<p>For this guide we will trigger each job manually, however in production you will want to add the <strong>Build Trigger</strong> option <strong>Build periodically</strong> and complete the <strong>Schedule</strong> field.</p>
<p>Click <strong>Save</strong> once complete and then click <strong>Back to Dashboard</strong>.</p>
<h2 id="test-the-jenkins-automation-exercises">Test the Jenkins Automation (Exercises)</h2>
<p>To ensure our automation pipeline works, lets conduct tests.</p>
<h3 id="submit-a-new-package">Submit a new package</h3>
<p>Before submitting a new package lets make sure we have no packages in our test or production repositories (all of these commands are run on the Jenkins server):</p>
<ol>
<li>To check the test repository, enter this at the command line <code>choco list --source http://testrepo-srv/chocolatey</code>. You should get this returned (note that the actual version of Chocolatey you see may be different):</li>
</ol>
<pre><code class="language-powershell">  PS&gt; choco list --source http://testrepo-srv/chocolatey
  Chocolatey v0.10.11 Business
  0 packages found.
</code></pre>
<p><code>2.</code> To check the production repository, enter this at the command line <code>choco list --source http://prodrepo-srv/chocolatey</code>. You should get this returned (note that the actual version of Chocolatey you see may be different):</p>
<pre><code class="language-powershell">  PS&gt; choco list --source http://prodrepo-srv/chocolatey
  Chocolatey v0.10.11 Business
  0 packages found.
</code></pre>
<p>Follow these steps to add a new package:</p>
<ol>
<li>On the Jenkins homepage, click the little drop down arrow to the right of the <strong>Internalize packages from the Community Repository</strong> job and click <strong>Build with Parameters</strong>;</li>
<li>In the parameters page enter <code>adobereader</code> in the <strong>P_PKG_LIST</strong> and click the <strong>Build</strong> button;</li>
</ol>
<p>You can check the progress of the job by click on the <strong>Last build (#..</strong> link under <em>Permalinks</em> on that page and see the output by clicking on <strong>Console Output</strong> on the right hand side of that page;</p>
<p>This Jenkins job will run and then, if it is successful will trigger the job named <strong>Update production repository</strong> which will update the production repository with any new or updated packages in the test repository, in this case the <code>adobereader</code> package we just added. To see this:</p>
<ol>
<li>To check the test repository, enter this at the command line <code>choco list --source http://testrepo-srv/chocolatey</code>. You should get this returned (note that the actual version of <code>adobereader</code> and Chocolatey you see may be different):</li>
</ol>
<pre><code class="language-powershell">  PS&gt; choco list --source http://testrepo-srv/chocolatey
  Chocolatey v0.10.11 Business
  adobereader 2015.007.20033.02
  1 packages found.
</code></pre>
<p><code>2.</code> To check the production repository, enter this at the command line <code>choco list --source http://prodrepo-srv/chocolatey</code>. You should get this returned (note that the actual version of <code>adobereader</code> and Chocolatey you see may be different):</p>
<pre><code class="language-powershell">  PS&gt; choco list --source http://prodrepo-srv/chocolatey
  Chocolatey v0.10.11 Business
  adobereader 2015.007.20033.02
  1 packages found.
</code></pre>
<h3 id="updating-a-package-from-the-chocolatey-community-repository">Updating a package from the Chocolatey Community Repository</h3>
<p>As packages get out of date in your test repository you need to update them from the Chocolatey Community Repository. Before we start let's add an older version of a package.</p>
<ol>
<li>Download and internalize the <code>putty.install</code> package to the current directory by entering this on the command line: <code>choco download putty.install --version 0.70 --internalize --force --internalize-all-urls --append-use-original-location --output-directory . --source https://chocolatey.org/api/v2/</code>;</li>
<li>Submit the internalized package to the test repository by entering this on the command line: <code>choco push putty.install.0.70.nupkg --source http://testrepo-srv/chocolatey --api-key chocolateyrocks -force</code></li>
<li>Go back to Jenkins and run the job <strong>Update production repository</strong> with default parameters. This will test the <code>putty.install</code> package and push it to the production repository.</li>
<li>Go to the command line and run <code>choco list --source http://prodrepo-srv/chocolatey</code> and you should see these results (note that if you didn't follow the <a href="#submit-a-new-package">exercise above</a> then <code>adobereader</code> will not be in the list):</li>
</ol>
<pre><code class="language-powershell">  PS&gt; choco list --source http://prodrepo-srv/chocolatey
  Chocolatey v0.10.11 Business
  adobereader 2015.007.20033.02
  putty.install 0.70
  2 packages found.
</code></pre>
<p><code>5.</code> Go back to Jenkins and run the job <strong>Update test repository from Chocolatey Community Repository</strong> with default parameters. This will check the test repository against the Chocolatey Community Repository and update the <code>putty.install</code> package;
<code>6.</code> Go to the command line and run <code>choco list --source http://testrepo-srv/chocolatey --all-versions</code> and you should see these results (note that if you didn't follow the <a href="#submit-a-new-package">exercise above</a> then <code>adobereader</code> will not be in the list and the latest version of <code>putty.install</code> may be different):</p>
<pre><code class="language-powershell">  PS&gt; choco list --source http://testrepo-srv/chocolatey
  Chocolatey v0.10.11 Business
  adobereader 2015.007.20033.02
  putty.install 0.70.0.20171219
  putty.install 0.70
  3 packages found.
</code></pre>
<p><code>7.</code> As the Jenkins job <strong>Update test repository from Chocolatey Community Repository</strong> we ran earlier triggers the job <strong>Update production repository</strong>, the <code>putty.install</code> package will be automatically tested and pushed to the production repository. To check this, run the following on the command line <code>choco list --source http://prodrepo-srv/chocolatey --all-versions</code> and you should see these results (note that if you didn't follow the <a href="#submit-a-new-package">exercise above</a> then <code>adobereader</code> will not be in the list and the latest version of <code>putty.install</code> may be different)</p>
<pre><code class="language-powershell">  PS&gt; choco list --source http://prodrepo-srv/chocolatey
  Chocolatey v0.10.11 Business
  adobereader 2015.007.20033.02
  putty.install 0.70.0.20171219
  putty.install 0.70
  3 packages found.
</code></pre>

                             
                        </div>
                                <div id="rightSidebarNav" class="col-xl-2 pl-md-5 pl-xl-3 order-1 order-xl-2">
                                    <button class="btn btn-link btn-collapse font-weight-bold w-100 d-xl-none mb-2" type="button" data-toggle="collapse" data-target="#rightSidebar" aria-expanded="false" aria-controls="rightSidebar">Jump to Section</button>
                                    <div id="rightSidebar" class="sticky-top collapse">
                                        <div class="card card-body py-0 px-xl-0 mb-3">
                                                <p class="font-weight-bold pt-3"><a href="https://github.com/chocolatey/docs/edit/master/input/en-us/guides/organizations/automate-package-internalization.md"><i class="fas fa-pencil-alt" aria-hidden="true"></i> Edit This Page</a></p>
                                                <hr class="m-0">
                                            <p class="font-weight-bold pt-3">On This Page</p>
                                            <ul class="list-unstyled pb-3">
                                                    <li class="level-2"><a href="#summary">Summary</a></li>
                                                    <li class="level-2"><a href="#organizational-requirements">Organizational Requirements</a></li>
                                                    <li class="level-3"><a href="#architecture">Architecture</a></li>
                                                    <li class="level-2"><a href="#building-your-internal-infrastructure">Building Your Internal Infrastructure</a></li>
                                                    <li class="level-3"><a href="#server-pre-requisites">Server Pre-Requisites</a></li>
                                                    <li class="level-3"><a href="#internal-package-repositories">Internal Package Repositories</a></li>
                                                    <li class="level-4"><a href="#install-and-configure-chocolatey-server">Install and Configure Chocolatey Server</a></li>
                                                    <li class="level-3"><a href="#install-and-configure-jenkins-server">Install and Configure Jenkins Server</a></li>
                                                    <li class="level-4"><a href="#script-get-updatedpackage.ps1">Script: Get-UpdatedPackage.ps1</a></li>
                                                    <li class="level-4"><a href="#script-update-prodrepofromtest.ps1">Script: Update-ProdRepoFromTest.ps1</a></li>
                                                    <li class="level-4"><a href="#script-convertto-chocoobject.ps1">Script: ConvertTo-ChocoObject.ps1</a></li>
                                                    <li class="level-4"><a href="#create-jenkins-jobs">Create Jenkins Jobs</a></li>
                                                    <li class="level-5"><a href="#jenkins-job-details-update-test-repository">Jenkins Job Details: Update Test Repository</a></li>
                                                    <li class="level-5"><a href="#jenkins-job-details-internalize-package">Jenkins Job Details: Internalize Package</a></li>
                                                    <li class="level-5"><a href="#jenkins-job-details-update-production-repository">Jenkins Job Details: Update Production Repository</a></li>
                                                    <li class="level-2"><a href="#test-the-jenkins-automation-exercises">Test the Jenkins Automation (Exercises)</a></li>
                                                    <li class="level-3"><a href="#submit-a-new-package">Submit a new package</a></li>
                                                    <li class="level-3"><a href="#updating-a-package-from-the-chocolatey-community-repository">Updating a package from the Chocolatey Community Repository</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="cookieNoticeAlert" class="alert alert-primary alert-dismissible alert-dismissible-center alert-btn-center fade show d-none" role="alert">
            <p class="mb-0"><strong>docs.chocolatey.org uses cookies to enhance the user experience of the site.</strong></p>
            <button type="button" class="btn btn-light btn-sm d-none d-md-inline-block" data-dismiss="alert" aria-label="Close">I accept</button>
            <button type="button" class="btn btn-light d-md-none" data-dismiss="alert" aria-label="Close">I accept</button>
        </div>
        <footer class="p-3 small text-center">
            <span>© 2020 Chocolatey Software, Inc.</span><br>
            <span>Deployed from <a href="https://github.com/chocolatey/docs/commit/816ae7fe88615976d60d22672ce1d9d5b0ae1535">816ae7fe</a></span><br>
            <span><a href="https://statiq.dev/">Generated by Statiq</a></span>
        </footer>

        <script type="text/javascript" src="/assets/js/chocolatey.bundle.min.js"></script>
        <script>
            ((window.gitter = {}).chat = {}).options = {
                room: 'chocolatey/choco'
            };
        </script>
        <script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script>
        <script type="text/javascript" src="/assets/js/docsearch.min.js"></script>
        <script type="text/javascript">
            docsearch({
                apiKey: '8148a7b5d009b8590bb85191c6f1823c',
                indexName: 'chocolatey',
                inputSelector: '#searchQuery',
                debug: false // Set debug to true if you want to inspect the dropdown
            });
        </script>
    
</body></html>